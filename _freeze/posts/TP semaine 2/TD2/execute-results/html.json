{
  "hash": "150d7744c3eb842ca0c67ad28ddd1715",
  "result": {
    "markdown": "---\ntitle: \"TD2\"\nformat: html\neditor: visual\n---\n\n\n# TD2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rvest)\nlibrary(purrr)\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter()         masks stats::filter()\n✖ readr::guess_encoding() masks rvest::guess_encoding()\n✖ dplyr::lag()            masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n:::\n\n\n## Question 1 :\n\nLancez la commande suivante :\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlist_tables <-\n  session(\"https://fr.wikipedia.org/wiki/Liste_des_m%C3%A9daill%C3%A9s_olympiques\") |>\n  html_elements(\".wikitable\") |>\n    html_table()\n```\n:::\n\n\nQue s'est-il passé ? Que contient l'objet list_tables ? Cette commande a assignée des informations contenues dans une page wikipedia à un objet nommé list_tables. Cet objet contient une liste de 6 tibbles, ces derniers contiennent des informations sur des disciplines olympiques.\n\n## Question 2 :\n\nNous allons tout d'abord nous intéresser à la première table. Créez un objet intitulé data_medailles_sport_ete contenant le premier élément de list_tables. La table n'est pas bien formattée. Supprimez la première colonne, les noms de colonnes et la première ligne. Renommez les colonnes en c(\"Discipline\", \"Annees\", \"Editions\", \"Epreuves_2020\", \"Or\", \"Argent\", \"Bronze\", \"Total\", \"Athletes_medailles\", \"Athletes_or\"). Les colonnes Editions, Epreuves_2020, Or, Argent, Bronze, Total seront converties en colonnes d'entiers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_medailles_sport_ete <- list_tables[[1]]\ndata_medailles_sport_ete <- data_medailles_sport_ete[, -1]\ndata_medailles_sport_ete <- data_medailles_sport_ete[-1,]\ncolnames(data_medailles_sport_ete) <- NULL\ncolnames(data_medailles_sport_ete) <- c(\"Discipline\", \"Annees\", \n                                        \"Editions\", \"Epreuves_2020\", \"Or\",\n                                        \"Argent\", \"Bronze\", \"Total\",\n                                        \"Athletes_medailles\",\"Athletes_or\")\n\nlapply(c(data_medailles_sport_ete$Editions, data_medailles_sport_ete$Epreuves_2020,\n         data_medailles_sport_ete$Or, data_medailles_sport_ete$Argent,\n         data_medailles_sport_ete$Bronze, data_medailles_sport_ete$Total), as.integer)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[[1]]\n[1] 29\n\n[[2]]\n[1] 28\n\n[[3]]\n[1] 8\n\n[[4]]\n[1] 20\n\n[[5]]\n[1] 26\n\n[[6]]\n[1] 20\n\n[[7]]\n[1] 29\n\n[[8]]\n[1] 26\n\n[[9]]\n[1] 29\n\n[[10]]\n[1] 27\n\n[[11]]\n[1] 4\n\n[[12]]\n[1] 29\n\n[[13]]\n[1] 14\n\n[[14]]\n[1] 26\n\n[[15]]\n[1] 24\n\n[[16]]\n[1] 14\n\n[[17]]\n[1] 28\n\n[[18]]\n[1] 29\n\n[[19]]\n[1] 10\n\n[[20]]\n[1] 25\n\n[[21]]\n[1] 27\n\n[[22]]\n[1] 6\n\n[[23]]\n[1] 16\n\n[[24]]\n[1] 9\n\n[[25]]\n[1] 27\n\n[[26]]\n[1] 17\n\n[[27]]\n[1] 6\n\n[[28]]\n[1] 27\n\n[[29]]\n[1] 15\n\n[[30]]\n[1] 26\n\n[[31]]\n[1] 48\n\n[[32]]\n[1] 14\n\n[[33]]\n[1] 5\n\n[[34]]\n[1] 4\n\n[[35]]\n[1] 13\n\n[[36]]\n[1] 16\n\n[[37]]\n[1] 22\n\n[[38]]\n[1] 6\n\n[[39]]\n[1] 12\n\n[[40]]\n[1] 2\n\n[[41]]\n[1] 2\n\n[[42]]\n[1] 18\n\n[[43]]\n[1] 2\n\n[[44]]\n[1] 14\n\n[[45]]\n[1] 2\n\n[[46]]\n[1] 15\n\n[[47]]\n[1] 18\n\n[[48]]\n[1] 37\n\n[[49]]\n[1] 2\n\n[[50]]\n[1] 2\n\n[[51]]\n[1] 8\n\n[[52]]\n[1] 8\n\n[[53]]\n[1] 5\n\n[[54]]\n[1] 5\n\n[[55]]\n[1] 15\n\n[[56]]\n[1] 5\n\n[[57]]\n[1] 3\n\n[[58]]\n[1] 10\n\n[[59]]\n[1] 2\n\n[[60]]\n[1] 2\n\n[[61]]\n[1] 1028\n\n[[62]]\n[1] 269\n\n[[63]]\n[1] 39\n\n[[64]]\n[1] 32\n\n[[65]]\n[1] 266\n\n[[66]]\n[1] 242\n\n[[67]]\n[1] 263\n\n[[68]]\n[1] 151\n\n[[69]]\n[1] 223\n\n[[70]]\n[1] 34\n\n[[71]]\n[1] 8\n\n[[72]]\n[1] 380\n\n[[73]]\n[1] 26\n\n[[74]]\n[1] 229\n\n[[75]]\n[1] 35\n\n[[76]]\n[1] 152\n\n[[77]]\n[1] 430\n\n[[78]]\n[1] 607\n\n[[79]]\n[1] 20\n\n[[80]]\n[1] 42\n\n[[81]]\n[1] 130\n\n[[82]]\n[1] 48\n\n[[83]]\n[1] 71\n\n[[84]]\n[1] 37\n\n[[85]]\n[1] 288\n\n[[86]]\n[1] 70\n\n[[87]]\n[1] 13\n\n[[88]]\n[1] 195\n\n[[89]]\n[1] 30\n\n[[90]]\n[1] 28\n\n[[91]]\n[1] 1030\n\n[[92]]\n[1] 268\n\n[[93]]\n[1] 39\n\n[[94]]\n[1] 32\n\n[[95]]\n[1] 266\n\n[[96]]\n[1] 241\n\n[[97]]\n[1] 261\n\n[[98]]\n[1] 149\n\n[[99]]\n[1] 223\n\n[[100]]\n[1] 34\n\n[[101]]\n[1] 8\n\n[[102]]\n[1] 361\n\n[[103]]\n[1] 26\n\n[[104]]\n[1] 225\n\n[[105]]\n[1] 35\n\n[[106]]\n[1] 151\n\n[[107]]\n[1] 429\n\n[[108]]\n[1] 604\n\n[[109]]\n[1] 18\n\n[[110]]\n[1] 42\n\n[[111]]\n[1] 130\n\n[[112]]\n[1] 48\n\n[[113]]\n[1] 72\n\n[[114]]\n[1] 37\n\n[[115]]\n[1] 289\n\n[[116]]\n[1] 69\n\n[[117]]\n[1] 13\n\n[[118]]\n[1] 185\n\n[[119]]\n[1] 30\n\n[[120]]\n[1] 28\n\n[[121]]\n[1] 1027\n\n[[122]]\n[1] 273\n\n[[123]]\n[1] 43\n\n[[124]]\n[1] 32\n\n[[125]]\n[1] 472\n\n[[126]]\n[1] 243\n\n[[127]]\n[1] 260\n\n[[128]]\n[1] 148\n\n[[129]]\n[1] 221\n\n[[130]]\n[1] 35\n\n[[131]]\n[1] 9\n\n[[132]]\n[1] 364\n\n[[133]]\n[1] 26\n\n[[134]]\n[1] 229\n\n[[135]]\n[1] 36\n\n[[136]]\n[1] 304\n\n[[137]]\n[1] 499\n\n[[138]]\n[1] 603\n\n[[139]]\n[1] 19\n\n[[140]]\n[1] 42\n\n[[141]]\n[1] 132\n\n[[142]]\n[1] 80\n\n[[143]]\n[1] 87\n\n[[144]]\n[1] 41\n\n[[145]]\n[1] 287\n\n[[146]]\n[1] 61\n\n[[147]]\n[1] 13\n\n[[148]]\n[1] 180\n\n[[149]]\n[1] 30\n\n[[150]]\n[1] 29\n\n[[151]]\n[1] 3085\n\n[[152]]\n[1] 810\n\n[[153]]\n[1] 121\n\n[[154]]\n[1] 96\n\n[[155]]\n[1] 1004\n\n[[156]]\n[1] 726\n\n[[157]]\n[1] 784\n\n[[158]]\n[1] 448\n\n[[159]]\n[1] 667\n\n[[160]]\n[1] 103\n\n[[161]]\n[1] 19\n\n[[162]]\n[1] 1105\n\n[[163]]\n[1] 78\n\n[[164]]\n[1] 683\n\n[[165]]\n[1] 106\n\n[[166]]\n[1] 607\n\n[[167]]\n[1] 1358\n\n[[168]]\n[1] 1814\n\n[[169]]\n[1] 57\n\n[[170]]\n[1] 126\n\n[[171]]\n[1] 392\n\n[[172]]\n[1] 176\n\n[[173]]\n[1] 230\n\n[[174]]\n[1] 115\n\n[[175]]\n[1] 864\n\n[[176]]\n[1] 200\n\n[[177]]\n[1] 39\n\n[[178]]\n[1] 560\n\n[[179]]\n[1] 90\n\n[[180]]\n[1] 85\n```\n:::\n\n```{.r .cell-code}\ncolonnes_int <- c(\"Editions\", \"Epreuves_2020\", \"Or\", \"Argent\", \"Bronze\", \"Total\")\ndata_medailles_sport_ete[colonnes_int] <- lapply(data_medailles_sport_ete[colonnes_int], as.integer)\n```\n:::\n\n\n## Question 3 :\n\nQuelles sont les 3 disciplines avec le plus de médailles distribuées depuis le début de l'histoire des jeux olympiques ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_medailles_sport_ete |> arrange(desc(Total)) |> head(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 10\n  Discipline             Annees Editions Epreuves_2020    Or Argent Bronze Total\n  <chr>                  <chr>     <int>         <int> <int>  <int>  <int> <int>\n1 Athlétisme             Depui…       29            48  1028   1030   1027  3085\n2 Natation(hommes, femm… Depui…       29            37   607    604    603  1814\n3 Lutte                  1896,…       28            18   430    429    499  1358\n# ℹ 2 more variables: Athletes_medailles <chr>, Athletes_or <chr>\n```\n:::\n:::\n\n\nLes disciplines ayant distribués le plus de médailles distribués sont donc l'athlétisme en première position, suivi par la natation et la lutte.\n\n## Question 4 :\n\nQuelles sont les disciplines avec le moins d'épreuves en 2020 ?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmoins_epreuve <- data_medailles_sport_ete |>  dplyr::filter( Epreuves_2020 == min(Epreuves_2020))\nprint(moins_epreuve)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 10\n  Discipline            Annees  Editions Epreuves_2020    Or Argent Bronze Total\n  <chr>                 <chr>      <int>         <int> <int>  <int>  <int> <int>\n1 Football              1900–1…       27             2    34     34     35   103\n2 Golf                  1900–1…        4             2     8      8      9    19\n3 Handball              1936,d…       14             2    26     26     26    78\n4 Hockey sur gazon      1908, …       24             2    35     35     36   106\n5 Natation synchronisée Depuis…       10             2    20     18     19    57\n6 Pentathlon moderne    Depuis…       25             2    42     42     42   126\n7 Volley-ball           Depuis…       15             2    30     30     30    90\n8 Water polo            1900,d…       26             2    28     28     29    85\n# ℹ 2 more variables: Athletes_medailles <chr>, Athletes_or <chr>\n```\n:::\n:::\n\n\nLes 8 disciplines affichées ci dessus sont celles avec le moins d'épreuves pour 2020. Ces dernières n'en auront que 2 chacunes.\n\n## Question 5 :\n\nLa colonne Editions nous renseigne sur le nombre total d'apparence des disciplines aux JO d'été. Nous souhaitons vérifier ce calcul en implémentant notre propre fonction calcul_nb_editions_int. Dans un premier temps, la fonction calcul_nb_editions prendra en entrée un paramètre depuis, de type entier, qui représente depuis quelle année la discipline est au programme.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncalcul_nb_editions_int <- function(depuis){\n  nb_apparences <- (2024 - depuis) / 4\n  if (depuis < 1917){\n    nb_apparences <- nb_apparences - 3\n  } else if (depuis >= 1917 & depuis <= 1940){\n    nb_apparences <- nb_apparences - 2\n  } else if (depuis >= 1941 & depuis <= 1944){\n    nb_apparences <- nb_apparences - 1\n  }\n  return(nb_apparences)\n}\ncalcul_nb_editions_int(1980)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 11\n```\n:::\n:::\n\n\nCette fonction permet de mesurer le nombre d'apparition des disciplines au JO en sachant que les éditions de 1916, 1940 et 1944 n'ont pas eu lieu pour cause de guerre mondiale. Cette fonction marche uniquement pour les disciplines ayant apparuent régulièrement et uniquement depuis leur première apparition.\n\n## Question 6 :\n\nDans certains cas, les disciplines ont été au programme de façon discontinue. Proposez une nouvelle fonction calcul_nb_editions_str qui prendra cette fois-ci en entrée des chaînes de caractères.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncalcul_nb_editions_str <- function(chaine_cara){\n  addition1=0\n  addition2=0\n  soustraction1 = 0\n  soustraction2 = 0\n  soustraction3 = 0\n  date_origine = 0\n  result = 0\n vecteur_date <- unlist(str_split(chaine_cara, \",\"))\n for (i in seq_along(vecteur_date)){\n   if (grepl(\"-\", vecteur_date[i])){\n     addition1 = addition1 + (as.numeric(substr(vecteur_date[i], start = 5, stop = 9))\n                              - as.numeric(substr(vecteur_date[[i]], start = 1, stop = 4))) / 4\n   }else if(grepl(\"depuis\", vecteur_date[i])){\n     date_origine = as.numeric(substr(vecteur_date[i], start = 9, stop = 12))\n     parutions_theoriques = (2024 - date_origine)/4\n     if (date_origine < 1917){\n       soustraction1 <- soustraction1 + 3\n     } else if (date_origine >= 1917 & date_origine <= 1940){\n       soustraction2 <- soustraction2 + 2\n     } else if (date_origine >= 1941 & date_origine <= 1944){\n       soustraction3 <- soustraction3 + 1\n     }\n   }else{\n     addition2 = addition2 + 1\n   }\n }\n\n result = parutions_theoriques + addition1 + addition2 - soustraction1 - soustraction2 - soustraction3\n return(result)\n}\n\ncalcul_nb_editions_str(\"1896, 1904, depuis 1920\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 26\n```\n:::\n:::\n\n\nCette fois, la fonction prend pour argument des chaines de caractères. De plus, elle renvoie bien 26 lorqu'on lui passe l'argument : \"1896, 1904, depuis 1920\".\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}